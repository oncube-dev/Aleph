# Структура проекта Aleph Messenger

## Обзор

Проект был реорганизован из "свалки" файлов в логичную структуру папок для удобства разработки и поддержки.

## Итоговая структура

```
Aleph/
├── main.py                    # Главный файл приложения (оставлен в корне)
├── requirements.txt           # Зависимости Python
├── README.md                 # Обновленная документация
├── PROJECT_STRUCTURE.md      # Этот файл
├── messenger.db              # База данных SQLite
├── build.spec                # Спецификация для PyInstaller
│
├── src/                      # Исходный код
│   ├── __init__.py          # Пакет src
│   │
│   ├── core/                # Основные компоненты
│   │   ├── __init__.py
│   │   └── server.py        # Сервер для тестирования
│   │
│   ├── ui/                  # Пользовательский интерфейс
│   │   ├── __init__.py
│   │   ├── auth_window.py   # Окно аутентификации
│   │   └── main_window.py   # Главное окно мессенджера
│   │
│   ├── network/             # Сетевое взаимодействие
│   │   ├── __init__.py
│   │   └── network_manager.py # Менеджер сетевых соединений
│   │
│   ├── audio/               # Обработка аудио
│   │   ├── __init__.py
│   │   └── audio_manager.py # Менеджер аудио
│   │
│   ├── database/            # Работа с базой данных
│   │   ├── __init__.py
│   │   └── database.py      # Класс для работы с БД
│   │
│   ├── config/              # Конфигурация
│   │   ├── __init__.py
│   │   ├── config.py        # Основная конфигурация
│   │   ├── client_config.py # Конфигурация клиента
│   │   └── server_config.py # Конфигурация сервера
│   │
│   └── utils/               # Утилиты и скрипты
│       ├── __init__.py
│       ├── run.bat          # Скрипт запуска для Windows
│       ├── run.sh           # Скрипт запуска для Linux/macOS
│       ├── build.bat        # Скрипт сборки
│       └── start_server.bat # Скрипт запуска сервера
│
├── assets/                   # Ресурсы приложения
│   ├── icons/               # Иконки (создана папка)
│   └── sounds/              # Звуки (создана папка)
│
├── docs/                     # Документация
│   ├── ARCHITECTURE.md      # Описание архитектуры
│   └── QUICK_START.md       # Быстрый старт для разработчиков
│
└── tests/                    # Тесты
    ├── test_app.py          # Тест приложения
    └── test_chat_update.py  # Тест обновления чата
```

## Что было сделано

### 1. Реорганизация файлов
- **Перемещены** все исходные файлы в соответствующие папки
- **Созданы** `__init__.py` файлы для правильной работы Python модулей
- **Обновлены** все импорты в файлах для новой структуры

### 2. Создание структуры папок
- `src/core/` - основные компоненты (сервер)
- `src/ui/` - пользовательский интерфейс
- `src/network/` - сетевое взаимодействие
- `src/audio/` - обработка аудио
- `src/database/` - работа с базой данных
- `src/config/` - конфигурация
- `src/utils/` - утилиты и скрипты

### 3. Обновление документации
- **README.md** - полностью переписан с новой структурой
- **requirements.txt** - создан с правильными зависимостями
- **ARCHITECTURE.md** - описание архитектуры приложения
- **QUICK_START.md** - быстрый старт для разработчиков

### 4. Установка зависимостей
- **PyQt5** - для GUI
- **PyAudio** - для аудио
- **numpy** - для обработки данных
- **requests** - для HTTP запросов

## Как использовать

### Запуск сервера
```bash
python src/core/server.py
```

### Запуск клиента
```bash
python main.py
```

### Альтернативный запуск
```bash
# Windows
src\utils\start_server.bat  # Сервер
src\utils\run.bat           # Клиент

# Linux/macOS
src/utils/run.sh            # Клиент
```

## Преимущества новой структуры

1. **Логичность** - файлы сгруппированы по функциональности
2. **Масштабируемость** - легко добавлять новые модули
3. **Читаемость** - понятно, где что находится
4. **Поддержка** - удобно исправлять ошибки и добавлять функции
5. **Тестирование** - отдельная папка для тестов
6. **Документация** - подробные инструкции для разработчиков

## Порты и сеть

- **TCP 47990** - для текстовых сообщений и управления
- **UDP 47990** - для аудио данных

**Для работы из интернета:**
- Откройте порт 47990 (TCP и UDP) на роутере
- Настройте перенаправление портов на локальный IP сервера

## Следующие шаги

1. **Протестируйте** приложение после реорганизации
2. **Добавьте** новые функции в соответствующие папки
3. **Напишите** тесты для новых модулей
4. **Обновите** документацию при изменениях

## Примечания

- Файл `main.py` оставлен в корне для удобства запуска
- Все импорты обновлены для новой структуры
- База данных `messenger.db` осталась на месте
- Тестовые файлы перемещены в папку `tests/`
